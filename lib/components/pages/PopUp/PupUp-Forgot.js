var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _core=require("@material-ui/core");var _Toast=_interopRequireDefault(require("../../../utils/Toast"));require("firebase/auth");var _reactfire=require("reactfire");var _this=this,_jsxFileName="/home/guzman/ReactJSProjects/weblanatax/src/components/pages/PopUp/PupUp-Forgot.jsx";var SimpleDialog=function SimpleDialog(_ref){var onClose=_ref.onClose,open=_ref.open,title=_ref.title;var _useState=(0,_react.useState)(''),_useState2=(0,_slicedToArray2.default)(_useState,2),email=_useState2[0],setEmail=_useState2[1];var firebase=(0,_reactfire.useFirebaseApp)();var handleClose=function handleClose(userUid){onClose(userUid);};var validation=function validation(){return _regenerator.default.async(function validation$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(email.length===0)){_context.next=4;break;}return _context.abrupt("return",(0,_Toast.default)("Debe ingresar un correo","error"));case 4:return _context.abrupt("return",signIn());case 5:case"end":return _context.stop();}}},null,null,null,Promise);};var signIn=function signIn(){return _regenerator.default.async(function signIn$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regenerator.default.awrap(firebase.auth().sendPasswordResetEmail(email).then(function(data){(0,_Toast.default)("Revisa tu correo para reinicio de la contrase√±a","success");}).catch(function(err){if(err.code==="auth/invalid-email"){(0,_Toast.default)("Correo invalido","error");}else{(0,_Toast.default)("Ha ocurrido un error al enviar correo de vericacion","error");}}));case 2:case"end":return _context2.stop();}}},null,null,null,Promise);};return _react.default.createElement(_core.Dialog,{onClose:handleClose,"aria-labelledby":"simple-dialog-title",open:open,__self:_this,__source:{fileName:_jsxFileName,lineNumber:50,columnNumber:9}},_react.default.createElement(_core.DialogTitle,{id:"simple-dialog-title",__self:_this,__source:{fileName:_jsxFileName,lineNumber:51,columnNumber:13}},title),_react.default.createElement(_core.DialogContent,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:52,columnNumber:13}},_react.default.createElement(_core.DialogContentText,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:53,columnNumber:17}},"Ingresa tu correo electr\xF3nico para recuperar tu contrase\xF1a"),_react.default.createElement(_core.TextField,{autoFocus:true,margin:"dense",id:"Email",label:"Email",type:"email",fullWidth:true,onChange:function onChange(e){return setEmail(e.target.value);},__self:_this,__source:{fileName:_jsxFileName,lineNumber:56,columnNumber:17}})),_react.default.createElement(_core.DialogActions,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:66,columnNumber:13}},_react.default.createElement(_core.Button,{onClick:handleClose,color:"primary",__self:_this,__source:{fileName:_jsxFileName,lineNumber:67,columnNumber:17}},"Cancel"),_react.default.createElement(_core.Button,{onClick:function onClick(){return validation();},color:"primary",__self:_this,__source:{fileName:_jsxFileName,lineNumber:70,columnNumber:17}},"Enviar")));};var _default=SimpleDialog;exports.default=_default;